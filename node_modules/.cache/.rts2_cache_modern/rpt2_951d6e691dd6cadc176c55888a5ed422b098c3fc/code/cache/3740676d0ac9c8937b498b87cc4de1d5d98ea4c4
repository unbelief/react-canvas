{"code":"import { useContext, useEffect } from \"react\";\r\nimport { context } from \"./scene\";\r\nimport useAttributes from \"./useAttributes\";\r\nconst Image = (props) => {\r\n    //   const { state, dispatch } = useContext(context);\r\n    const { state } = useContext(context);\r\n    const attributes = useAttributes(props);\r\n    useEffect(() => {\r\n        // let image = new Image();\r\n        // image.setAttribute(\"crossOrigin\", \"anonymous\");\r\n        // image.onload = function() {\r\n        //     renderImage(state.context, attributes);\r\n        //     image.onload = null;\r\n        //     image = null;\r\n        // };\r\n        // image.src = `${props.src}?${+new Date()}`;\r\n        renderImage(state.context, attributes, props.src);\r\n    }, [props.src]);\r\n    return null;\r\n};\r\nfunction renderImage(ctx, attributes, src) {\r\n    console.log(src, `image`, !!attributes.border);\r\n    //ctx.drawImage(content, attributes.left, attributes.top, attributes.width, attributes.height);\r\n    if (!!attributes.border) {\r\n        ctx.rect(attributes.left, attributes.top, attributes.width, attributes.height);\r\n        ctx.stroke();\r\n    }\r\n}\r\nexport { Image, renderImage };\r\n//# sourceMappingURL=image.js.map","references":["/Users/hhh/coding/react-canvas/node_modules/@types/react/index.d.ts","/Users/hhh/coding/react-canvas/src/adapter/scene.tsx","/Users/hhh/coding/react-canvas/src/adapter/useAttributes.tsx","/Users/hhh/coding/react-canvas/src/adapter/types.ts"],"map":"{\"version\":3,\"file\":\"image.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/adapter/image.tsx\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAM,UAAU,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AAClD,OAAO,EAAE,OAAO,EAAE,MAAM,SAAS,CAAC;AAClC,OAAO,aAAa,MAAM,iBAAiB,CAAC;AAQ5C,MAAM,KAAK,GAAc,CAAC,KAAiB,EAAE,EAAE;IAC7C,qDAAqD;IACrD,MAAM,EAAE,KAAK,EAAE,GAAG,UAAU,CAAC,OAAO,CAAC,CAAC;IACtC,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC;IACxC,SAAS,CAAC,GAAG,EAAE;QACb,2BAA2B;QAC3B,kDAAkD;QAClD,8BAA8B;QAC9B,8CAA8C;QAC9C,2BAA2B;QAC3B,oBAAoB;QACpB,KAAK;QACL,6CAA6C;QAE7C,WAAW,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;IACpD,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAEhB,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,SAAS,WAAW,CAClB,GAA6B,EAC7B,UAAqB,EACrB,GAAW;IAEX,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IAC/C,+FAA+F;IAC/F,IAAI,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE;QACvB,GAAG,CAAC,IAAI,CACN,UAAU,CAAC,IAAI,EACf,UAAU,CAAC,GAAG,EACd,UAAU,CAAC,KAAK,EAChB,UAAU,CAAC,MAAM,CAClB,CAAC;QACF,GAAG,CAAC,MAAM,EAAE,CAAC;KACd;AACH,CAAC;AAED,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,CAAC\"}","dts":{"name":"/Users/hhh/coding/react-canvas/adapter/image.d.ts","writeByteOrderMark":false,"text":"import { FC } from \"react\";\r\nimport { Props, Attribute } from \"./types\";\r\ndeclare const Image: FC<Props>;\r\ndeclare function renderImage(ctx: CanvasRenderingContext2D, attributes: Attribute, src: string): void;\r\nexport { Image, renderImage };\r\n"}}
